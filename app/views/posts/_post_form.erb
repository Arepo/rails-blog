<%= form_for @post do |f| %>
  <%= render 'error_messages' %>

  <%= f.label :title %>
  <%= f.text_field :title %>

  <%= f.label :body %>
  <%= f.text_area :body %>

  <div id="topic-select">
    <%= f.label :choose_from_existing_topics %>
    <%= f.select :topic, Post.topics, include_blank: true %>
  </div>

  <%= f.label :new_topic %>
  <input type="text" name="post[new_topic]" id="post_new_topic">

  <%= fields_for :tags do |tag_fields| %>
    <div id="tag-select">
    <!-- TODO - figure out why f.select doesn't seem to work with multiple: true -->
      Existing tags:
      <% Tag.names.each do |tag| %>
        <p><%= tag_fields.check_box tag %><%= tag %></p>
      <% end %>
    </div>

    <%= tag_fields.label :new_tags %>
    <%= tag_fields.text_area :new_tags %>
  <% end %>

  <%= fields_for :authors do |author_fields| %>
    <%= author_fields.label :"co-author" %>
    <%= author_fields.collection_select(
      :"co-author",
      Author.other_than(current_user),
      :id,
      :to_s,
      include_blank: true
    ) %>
  <% end %>

  <%= f.submit %>
<% end %>
